import { onDestroy } from 'svelte';
export const useCreateEvent = (oncreate) => {
    const cleanupFunctions = [];
    let ref;
    const dispatchCreateEvent = () => {
        // call every cleanup function
        cleanupFunctions.forEach((cleanup) => cleanup());
        // clear the cleanup functions array
        cleanupFunctions.length = 0;
        if (ref === undefined)
            return;
        const cleanup = oncreate?.(ref);
        if (cleanup)
            cleanupFunctions.push(cleanup);
    };
    const updateRef = (newRef) => {
        ref = newRef;
        dispatchCreateEvent();
    };
    onDestroy(() => {
        // call every cleanup function
        cleanupFunctions.forEach((cleanup) => cleanup());
    });
    return {
        updateRef
    };
};
