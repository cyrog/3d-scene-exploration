import mitt, {} from 'mitt';
import { getContext, onDestroy, setContext } from 'svelte';
export const flexContextName = '__threlte-flex';
export const createFlexContext = (data) => {
    const emitter = mitt();
    const eventCallback = {
        onEvent: (type, callback) => {
            emitter.on(type, callback);
            onDestroy(() => emitter.off(type, callback));
        }
    };
    const context = Object.assign(data, emitter, eventCallback);
    setContext(flexContextName, context);
    return context;
};
export const useFlex = () => {
    return getContext(flexContextName);
};
